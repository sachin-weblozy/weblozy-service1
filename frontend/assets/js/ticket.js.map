{"version":3,"file":"/frontend/assets/js/ticket.js","mappings":"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","sources":["webpack:///./resources/frontend/assets/js/ticket.js"],"sourcesContent":["window.submitTicketForm = {\n    showError(form, errors) {\n        if (form.querySelector('.validation-error')) {\n            form.querySelectorAll('.validation-error').forEach(item => {\n                item.remove();\n            });\n        }\n\n        for (const [field, msg] of Object.entries(errors)) {\n            let fieldItem = form.querySelector(`[name=\"${field}\"]`);\n\n            if (fieldItem) {\n                fieldItem.insertAdjacentHTML('afterend', `<div class=\"validation-error small mt-1 text-danger\">${msg}</div>`);\n            }\n        }\n    },\n\n    init(logResponse = true) {\n        let form = document.querySelector('.ticket-form');\n\n        if (form) {\n            let api_url = \"https://www.weblozy.com/basic/ilp/implementation/form-submit\";\n\n            if (typeof TICKET_API_URL == 'string') {\n                api_url = TICKET_API_URL;\n            }\n\n            form.addEventListener('submit', e => {\n                e.preventDefault();\n\n                let form = e.target;\n\n                let spinner = `<svg class=\"spinner\" viewBox=\"0 0 50 50\">\n                    <circle class=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"5\"></circle>\n                </svg>`;\n\n                form.insertAdjacentHTML('afterBegin', spinner);\n\n                let fdata = new FormData(form);\n\n                form.classList.add('waiting');\n\n                let data = {\n                    category: fdata.get('category'),\n                    project_name: fdata.get('project_name'),\n                    name: fdata.get('name'),\n                    email: fdata.get('email'),\n                    phone: fdata.get('phone'),\n                    description: fdata.get('description'),\n                };\n\n                if (document.querySelector('#files').files) {\n                    let files = document.querySelector('#files').files;\n                    data.files = files;\n\n                    // files.forEach(file => {\n                    //     data.files\n                    // });\n                }\n\n                // data.file = document.querySelector('#file').files[0] ?? null;\n\n                if (logResponse) {\n                    console.log(data);\n                }\n\n                axios.post(api_url, data, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                })\n                .then(resp => {\n                    if (logResponse) {\n                        console.log(resp.data);\n                    }\n\n                    form.classList.remove('waiting');\n                    form.querySelector('.spinner').remove();\n\n                    let data = resp.data;\n\n                    let output;\n                    if (data.success) {\n                        if (form.querySelector('.validation-error')) {\n                            form.querySelectorAll('.validation-error').forEach(item => {\n                                item.remove();\n                            });\n                        }\n\n                        form.querySelector('.form-content').outerHTML = `<div class=\"success\">\n                            <div class=\"icon\">\n                                <svg class=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\"><circle class=\"checkmark__circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\"/><path class=\"checkmark__check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\"/></svg>\n                            </div>\n\n                            <p class=\"mt-3 text-center lead fw-normal\">\n                            We have received your request. We will get back to you soon. Your ticket id is ${data.ticket.tid}.\n                            </p>\n                        </div>`;\n                    }\n                    else {\n                        let errors = data.errors;\n                        this.showError(form, errors);\n\n                        output = '<div class=\"mt-2 text-danger\">Form submission not successful.</div>';\n                    }\n\n                    // form.querySelectorAll('.status').forEach(status => {\n                    //     status.innerHTML = output;\n                    // });\n\n                    // form.querySelector('.status').innerHTML = output;\n\n\n                });\n            });\n        }\n    }\n};\n\nsubmitTicketForm.init();\n"],"names":["window","submitTicketForm","showError","form","errors","querySelector","querySelectorAll","forEach","item","remove","Object","entries","field","msg","fieldItem","insertAdjacentHTML","init","logResponse","document","api_url","TICKET_API_URL","addEventListener","e","preventDefault","target","spinner","fdata","FormData","classList","add","data","category","get","project_name","name","email","phone","description","files","console","log","axios","post","headers","then","resp","output","success","outerHTML","ticket","tid"],"sourceRoot":""}